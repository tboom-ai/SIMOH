import json
import random

# List of coordinates (ultimately from BIM)
# ROOMS
coordinates = [
    [[196.061093,1027.862405], [196.061093,630.323684], [507.007221,630.323684], [507.007221,1027.862405]],
    [[526.687355,653.939846], [526.687355,968.822001], [1097.411261,968.822001], [1097.411261,653.939846]],
    [[1107.251328,653.939846], [1412.293416,653.939846], [1412.293416,840.901126], [1107.251328,840.901126]],
    [[1422.133483,653.939846], [1731.111598,653.939846], [1731.111598,840.901126], [1422.133483,840.901126]],
    [[1740.951665,653.939846], [2049.92978,653.939846], [2049.92978,840.901126], [1740.951665,840.901126]],
    [[2059.769847,653.939846], [2368.747961,653.939846], [2368.747961,840.901126], [2059.769847,840.901126]],
    [[2378.588029,653.939846], [2608.845605,653.939846], [2608.845605,840.901126], [2378.588029,840.901126]],
    [[2628.525739,527.986984], [2931.599813,527.986984], [2931.599813,840.901126], [2628.525739,840.901126]],
    [[2719.806713,850.741193], [2931.599813,850.741193], [2931.599813,1105.126468], [2719.806713,1105.126468]],
    [[2719.806713,1114.966536], [2931.599813,1114.966536], [2931.599813,1379.191879], [2719.806713,1379.191879]],
    [[1117.091396,957.01392], [1219.428096,957.01392], [1219.428096,1106.582944], [1117.091396,1106.582944]],
    [[1229.268163,957.01392], [1406.389376,957.01392], [1406.389376,1027.862405], [1229.268163,1027.862405]],
    [[1416.229443,957.01392], [1731.111598,957.01392], [1731.111598,1850.492035], [1416.229443,1850.492035]],
    [[1750.791732,957.01392], [2608.845605,957.01392], [2608.845605,1830.827009], [1750.791732,1830.827009]],
    [[2628.525739,1617.066169], [2931.599813,1617.066169], [2931.599813,1850.492035], [2628.525739,1850.492035]],
    [[532.057487,1603.426554], [662.092098,1417.377035], [828.986611,1534.023738], [698.952001,1720.073257]],
    [[845.11735,1545.29791], [715.08274,1731.347429], [801.288701,1791.598908], [931.323312,1605.549389]],
    [[467.499674,1558.305502], [523.992118,1597.789468], [598.472808,1491.224788], [541.980364,1451.740822]],
    [[547.61745,1443.675453], [597.534284,1372.255982], [654.026728,1411.739949], [604.109894,1483.159419]]
]

# Create the JSON structure
zones = {}
for i, boundary in enumerate(coordinates):
    zone_name = f"BG.Oost.{i + 1}"

    # Calculate the approximate center location
    x_center = sum(point[0] for point in boundary) / len(boundary)
    y_center = sum(point[1] for point in boundary) / len(boundary)
    
    zones[zone_name] = {
        "boundary": boundary,
        "location": [x_center, y_center],  # Set the location to the middle of the bounding box
        "floorplan": "S.I.M.O.H./assets/construction_site_bk.jpg",
        "zone_activity": "Carpentry" if i % 2 == 0 else "Brick laying",  
        "required_PPE": "Helmet, Safety Shoes" if i % 2 == 0 else "Helmet",
        "risk_factor": round(random.uniform(0.05, 0.20), 2),
        "amount_of_hazards": 0,
        "hazard_type": []
    }

# Save the JSON to a file
output_json_file = 'S.I.M.O.H./assets/BIM.json'
with open(output_json_file, 'w') as file:
    json.dump(zones, file, indent=4)

print(f"Conversion complete! New JSON saved at: {output_json_file}")
